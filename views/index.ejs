<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jyotsna's NCBI Tools</title>
    <link rel="stylesheet" href="/styles/main.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Keep the header auth-links and remove the duplicate at the bottom -->
    <div class="container">
        <header>
            <div class="header-content">
                <h1>Jyotsna's NCBI Tools</h1>
                <p class="header-subtitle">Comprehensive Biotech Analysis Suite</p>
                <div class="auth-links">
                    <% if (typeof user !== 'undefined' && user) { %>
                        <div class="user-info">
                            <% if (user.photo) { %>
                                <img src="<%= user.photo %>" alt="Profile" class="profile-pic">
                            <% } %>
                            <span class="user-email"><%= user.email %></span>
                            <a href="/auth/welcome" class="auth-btn">NCBI credentials</a>
                            <a href="/auth/logout" class="auth-btn">Sign Out</a>
                        </div>
                    <% } else { %>
                        <a href="/auth/login" class="auth-btn">Login</a>
                        <a href="/auth/signup" class="auth-btn">Sign Up</a>
                    <% } %>
                </div>
            </div>
        </header>
        
        <div class="tools-grid">
            <!-- Active Tools Group -->
            <div class="tool-box pubmed-search">
                <div class="tool-icon">
                    <i class="fas fa-search"></i>
                </div>
                <h3>Advanced PubMed Search</h3>
                <p>Powerful literature search tool with custom filters, export options, and saved searches.</p>
                <a href="/pubmed-search" class="tool-link">Launch Tool <i class="fas fa-arrow-right"></i></a>
            </div>

            <div class="tool-box nucleotide-download">
                <div class="tool-icon">
                    <i class="fas fa-dna"></i>
                </div>
                <h3>Nucleotide Sequence Downloads</h3>
                <p>Efficiently download and export nucleotide sequences from NCBI.</p>
                <a href="/nucleotide-download" class="tool-link">Launch Tool <i class="fas fa-arrow-right"></i></a>
            </div>

            <div class="tool-box sequence-fetch">
                <div class="tool-icon">
                    <i class="fas fa-dna"></i>
                </div>
                <h3>Sequence Fetch Tool</h3>
                <p>Fetch and analyze nucleotide sequences from NCBI database.</p>
                <a href="/sequence-fetch" class="tool-link">Launch Tool <i class="fas fa-arrow-right"></i></a>
            </div>

            <div class="tool-box variant-analysis">
                <div class="tool-icon">
                    <i class="fas fa-dna"></i>
                </div>
                <h3>Variant Analysis Tool</h3>
                <p>Analyze genetic variants using Ensembl REST API.</p>
                <a href="/variant-analysis" class="tool-link">Launch Tool <i class="fas fa-arrow-right"></i></a>
            </div>

            <div class="tool-box">
                <div class="tool-icon">
                    <i class="fas fa-dna"></i>
                </div>
                <h3>SNP Primer Designer</h3>
                <p>Design PCR primers for SNP genotyping with optimized parameters.</p>
                <a href="/design-primers" class="tool-link">Launch Tool <i class="fas fa-arrow-right"></i></a>
            </div>

            <div class="tool-box">
                <div class="tool-icon">
                    <i class="fas fa-sort-numeric-up"></i>
                </div>
                <h3>Sequence Character Indexer</h3>
                <p>Index and analyze character distribution in sequences.</p>
                <a href="/sequence-indexer" class="tool-link">Launch Tool <i class="fas fa-arrow-right"></i></a>
            </div>

            <div class="tool-box sequence-comparison">
                <div class="tool-icon">
                    <i class="fas fa-dna"></i>
                </div>
                <h3>Sequence Comparison Tool</h3>
                <p>Compare DNA/RNA sequences to identify mutations.</p>
                <a href="/sequence-comparison" class="tool-link">Launch Tool <i class="fas fa-arrow-right"></i></a>
            </div>

            <!-- Add DNA Analysis Tool -->
            <div class="tool-box">
                <div class="tool-icon">
                    <i class="fas fa-microscope"></i>
                </div>
                <h3>DNA Sequence Analysis</h3>
                <p>Analyze nucleotide composition of DNA sequences from NCBI.</p>
                <a href="/dna-analysis" class="tool-link">Launch Tool <i class="fas fa-arrow-right"></i></a>
            </div>

            <!-- Placeholder Tools (Coming Soon) -->
            <div class="tool-box disabled">
                <div class="tool-icon">
                    <i class="fas fa-flask"></i>
                </div>
                <h3>Coming Soon</h3>
                <p>New tool under development</p>
                <span class="tool-link disabled">Coming Soon</span>
            </div>

            <!-- Add more placeholder boxes as needed -->
        </div>
        
        <footer class="quote-footer">
            <p class="quote-text">"Biotech and coding: where the poetry of life üß¨ meets the logic of machines üíª, crafting tomorrow's miracles ‚ú® with a keyboard ‚å®Ô∏è and a gene üî¨"</p>
        </footer>
    </div>
    <!-- Remove this duplicate section -->
    <!-- <div class="auth-links"> ... </div> -->

    <!-- Citation Section -->
    <div id="globalCitation" class="citation-section">
        <h3>How to Cite</h3>
        <div class="citation-formats">
            <div class="citation-box">
                <h4>APA</h4>
                <div id="apaCitation" class="citation-text"></div>
                <button onclick="copyCitation('apa')" class="copy-btn">Copy</button>
            </div>
            
            <div class="citation-box">
                <h4>MLA</h4>
                <div id="mlaCitation" class="citation-text"></div>
                <button onclick="copyCitation('mla')" class="copy-btn">Copy</button>
            </div>
            
            <div class="citation-box">
                <h4>BibTeX</h4>
                <div id="bibtexCitation" class="citation-text"></div>
                <button onclick="copyCitation('bibtex')" class="copy-btn">Copy</button>
            </div>
        </div>
    </div>

    <style>
    /* Citation styles */
    .citation-section {
        margin: 40px auto;
        padding: 20px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        max-width: 1000px;
    }

    .citation-section h3 {
        color: #333;
        margin-bottom: 15px;
        font-size: 1.2em;
        text-align: left;
    }

    .citation-formats {
        display: flex;
        flex-direction: row;
        gap: 15px;
        flex-wrap: wrap;
    }

    .citation-box {
        flex: 1;
        min-width: 250px;
        padding: 15px;
        border: 1px solid #eee;
        border-radius: 4px;
        background: #f9f9f9;
    }

    .citation-box h4 {
        color: #444;
        margin-bottom: 8px;
        font-size: 0.9em;
    }

    .citation-text {
        margin: 8px 0;
        padding: 12px;
        background: white;
        border: 1px solid #eee;
        border-radius: 4px;
        font-size: 0.9em;
        line-height: 1.5;
        height: 80px;
        overflow-y: auto;
        word-break: break-word;
    }

    .copy-btn {
        background: #2196F3;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.9em;
        transition: background 0.3s;
        width: 100%;
        margin-top: 8px;
    }

    .copy-btn:hover {
        background: #0d8aee;
    }

    @media (max-width: 768px) {
        .citation-formats {
            flex-direction: column;
        }
    }
    </style>

    <script>
    // Citation functionality
    document.addEventListener('DOMContentLoaded', function() {
        // Update citations with site information
        const currentDate = new Date();
        const year = currentDate.getFullYear();
        const siteUrl = 'https://ncbi.jyotsnapriyam.com';
        const siteName = 'Jyotsna NCBI Tools';
        const authors = 'Priyam, J.';
        
        // Format citations
        const apaCitation = `${authors} (${year}). ${siteName}. Retrieved from ${siteUrl}`;
        const mlaCitation = `${authors} "${siteName}." ${year}, ${siteUrl}. Accessed ${currentDate.toLocaleDateString('en-US', {day: 'numeric', month: 'long', year: 'numeric'})}.`;
        const bibtexCitation = `@misc{jyotsna_ncbi_tools,
        author = {${authors}},
        title = {${siteName}},
        year = {${year}},
        url = {${siteUrl}},
        note = {Accessed: ${currentDate.toLocaleDateString('en-US', {day: 'numeric', month: 'long', year: 'numeric'})}}
    }`;

        // Set citation text
        document.getElementById('apaCitation').textContent = apaCitation;
        document.getElementById('mlaCitation').textContent = mlaCitation;
        document.getElementById('bibtexCitation').textContent = bibtexCitation;
    });

    // Function to copy citation
    function copyCitation(format) {
        let element;
        switch(format) {
            case 'apa':
                element = document.getElementById('apaCitation');
                break;
            case 'mla':
                element = document.getElementById('mlaCitation');
                break;
            case 'bibtex':
                element = document.getElementById('bibtexCitation');
                break;
        }

        const text = element.textContent;
        navigator.clipboard.writeText(text).then(() => {
            const btn = element.nextElementSibling;
            const originalText = btn.textContent;
            btn.textContent = 'Copied!';
            setTimeout(() => {
                btn.textContent = originalText;
            }, 2000);
        }).catch(err => {
            console.error('Failed to copy:', err);
            alert('Failed to copy citation. Please try selecting and copying manually.');
        });
    }
    </script>

    <a href="#globalCitation">Cite Us</a>
</body>
</html>